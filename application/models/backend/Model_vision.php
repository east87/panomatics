<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Model_vision extends CI_Model {    function __construct()    {        parent::__construct();    }		function getListVision($cond = null){		$query		= "SELECT vision_id, vision_title,vision_order,vision_active_status,					  DATE_FORMAT( vision_create_date, '%d-%m-%Y %H:%i:%s' ) as vision_create_date, vision_create_by					  FROM tbl_vision ".$cond;		$query		= $this->db->query($query)->result_array();				return $query;	}		function getListVisionLanguageAlias($id, $languageid){		$query		= "SELECT a.vision_id, b.vision_lang_id, b.vision_lang_title,  b.language_id						FROM tbl_vision a						INNER JOIN tbl_vision_lang b ON a.vision_id = b.vision_id 						WHERE a.vision_active_status = 1 AND a.vision_id = ".$id." AND b.language_id = ".$languageid."						ORDER BY a.vision_id DESC";		$query		= $this->db->query($query)->result_array();				return $query;	}		function getListVisionLanguage($cond = null){		$query		= "SELECT a.language_id, a.language_title, a.language_default, a.language_active_status, 					    b.vision_id, b.vision_lang_id						FROM tbl_language a						LEFT JOIN tbl_vision_lang b ON a.language_id = b.language_id						".$cond;		$query		= $this->db->query($query)->result_array();				return $query;	}		function getVision($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE vision_id = ".$id;		}		$sql	= "SELECT vision_id, vision_title,vision_active_status 				  FROM tbl_vision $where ORDER BY vision_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 				return $rs;		}		function getVisionLang($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE vision_lang_id = ".$id;		}		$sql	= "SELECT vision_lang_id, vision_lang_title FROM tbl_vision_lang $where ORDER BY vision_lang_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 				return $rs;		}		function activeVision($id)	{		$sql	= "UPDATE tbl_vision SET vision_active_status = abs(vision_active_status-1),  				   vision_update_date = now(), 				   vision_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE vision_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}		function deleteVision($id = '')	{		$sql	= "DELETE FROM tbl_vision WHERE vision_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}		function deleteVisionLang($id = '')	{		$sql	= "DELETE FROM tbl_vision_lang WHERE vision_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}		function checkVision( $visiontitle){		$sql	= "SELECT vision_title FROM tbl_vision WHERE  vision_title = '".$visiontitle."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}		function checkVisionLang($visiontitlelang){		$sql	= "SELECT * FROM tbl_vision_lang WHERE vision_lang_title = '".$visiontitlelang."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}		function insertVision($visiontitle)	{		$sql	= "INSERT INTO tbl_vision SET 					vision_title='".$visiontitle."', 					vision_create_by = ".$_SESSION['admin_data']['user_id'].", vision_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();				return $last_id;	}		function insertVisionLang($visiontitlelang,$vision_id,$language_id)	{		$sql	= "INSERT INTO tbl_vision_lang SET 					vision_lang_title='".$visiontitlelang."',					vision_id=".$vision_id.",					language_id=".$language_id.",					vision_lang_create_by = ".$_SESSION['admin_data']['user_id'].", vision_lang_create_date = now()";			$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();				return $last_id;	}		function updateVision($id,$visiontitle)	{		$sql	= "UPDATE tbl_vision SET 				   vision_title='".$visiontitle."', 				   vision_update_by = ".$_SESSION['admin_data']['user_id'].", 				   vision_update_date=now() WHERE vision_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}		function updateVisionDefault($id,$visiontitle)	{		$sql	= "UPDATE tbl_vision SET 				   vision_title='".$visiontitle."', 				   vision_update_by = ".$_SESSION['admin_data']['user_id'].", vision_update_date=now() WHERE vision_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}		function updateVisionLang($visiontitle,$visionid,$languageid)	{		$sql	= "UPDATE tbl_vision_lang SET 				   vision_lang_title='".$visiontitle."',				   vision_lang_update_by = ".$_SESSION['admin_data']['user_id'].", vision_lang_update_date=now() 				   WHERE vision_id = ".$visionid." AND language_id = ".$languageid;				$query	= $this->db->query($sql);				return $query;	}		function updateVisionLangID($id,$visiontitlelang)	{		$sql	= "UPDATE tbl_vision_lang SET 				   vision_lang_title='".$visiontitlelang."',				   vision_lang_update_by = ".$_SESSION['admin_data']['user_id'].", vision_lang_update_date=now() 				   WHERE vision_lang_id = ".$id;				$query	= $this->db->query($sql);				return $query;	}                function updateOrder($id,$order)	{		$sql	= "UPDATE tbl_vision SET 				   vision_order= ".$order.",				   vision_update_by = ".$_SESSION['admin_data']['user_id'].", vision_update_date=now() WHERE vision_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}}