<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Model_sectionc_gallery extends CI_Model {    function __construct()    {        parent::__construct();    }		function getGallery($sectionc_id,$cond = null){		 $query	 = "SELECT a.sectionc_gallery_id, a.sectionc_gallery_title,a.sectionc_gallery_image,"                                    . " a.sectionc_gallery_active_status,"                                    . "a.sectionc_gallery_order,"                                    . "DATE_FORMAT( a.sectionc_gallery_create_date, '%d-%m-%Y %H:%i:%s' ) as sectionc_gallery_create_date, a.sectionc_gallery_create_by "                                    . "FROM tbl_sectionc_gallery as a "                                    . " inner join tbl_sectionc as b on a.sectionc_id = b.sectionc_id "                                    . " where a.sectionc_id=".$sectionc_id." "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();		return $query;	}	    function getTitle($sectionc_gallery_id){            $data = array();             $hasil =   $this->db->query("select material_title as title from tbl_sectionc_gallery where sectionc_gallery_id = $sectionc_gallery_id ");				$data = $hasil->row_array();                                               return $data['title'];         }		function getGalleryBy($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE sectionc_gallery_id = ".$id;		}		$sql	= "SELECT a.sectionc_gallery_id, a.sectionc_gallery_title,a.sectionc_gallery_image,"                                    . "  a.sectionc_gallery_active_status,"                                    . "a.sectionc_gallery_order,"                                    . "DATE_FORMAT( a.sectionc_gallery_create_date, '%d-%m-%Y %H:%i:%s' ) as sectionc_gallery_create_date, a.sectionc_gallery_create_by, "                                    . " b.sectionc_id "                                    . "FROM tbl_sectionc_gallery as a "                                    . " inner join tbl_sectionc as b on a.sectionc_id = b.sectionc_id "                                    . " $where "                                    . " ORDER BY sectionc_gallery_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 				return $rs;		}		function activeGallery($id)	{		 $sql	= "UPDATE tbl_sectionc_gallery SET sectionc_gallery_active_status = abs(sectionc_gallery_active_status-1),  				   sectionc_gallery_update_date = now(), 				   sectionc_gallery_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE sectionc_gallery_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}		function deleteGallery($id = '')	{		$sql	= "DELETE FROM tbl_sectionc_gallery WHERE sectionc_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}	function deleteGalleryby($id = '')	{		$sql	= "DELETE FROM tbl_sectionc_gallery WHERE sectionc_gallery_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}	function checkGallery($sectionc_gallery_title, $sectionc_id){		$sql	= "SELECT sectionc_gallery_title FROM tbl_sectionc_gallery WHERE sectionc_gallery_title = '".$sectionc_gallery_title."' and sectionc_id = '".$sectionc_id."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}	            function insertGallery($data){                foreach ($data as $value) {                  $this->db->insert('tbl_sectionc_gallery', $value);                   }                $this->db->close();	}       	function editGallery($sectionc_gallery_title,$sectionc_gallery_image,$sectionc_gallery_order,$sectionc_gallery_status,$sectionc_gallery_id){          $today= date("Y-m-d H:i:s");          $data = array(                        'sectionc_gallery_title'=>$sectionc_gallery_title,                        'sectionc_gallery_image'=>$sectionc_gallery_image,                        'sectionc_gallery_order'=>$sectionc_gallery_order,                        'sectionc_gallery_active_status'=>$sectionc_gallery_status,                        'sectionc_gallery_update_by'=> $_SESSION['admin_data']['user_id'],                         'sectionc_gallery_update_date'=> $today                        );            $this->db->where('sectionc_gallery_id', $sectionc_gallery_id);            $this->db->update('tbl_sectionc_gallery', $data);            $this->db->close();	        }     function updateOrderGallery($id,$order)	{		$sql	= "UPDATE tbl_sectionc_gallery SET 				   sectionc_gallery_order= ".$order.",				   sectionc_gallery_update_by = ".$_SESSION['admin_data']['user_id'].", sectionc_gallery_update_date=now() WHERE sectionc_gallery_id = ".$id;			$query	= $this->db->query($sql);		return $query;	}      function generateSectionc(){		$query	= "SELECT a.sectionc_gallery_id, a.sectionc_gallery_title,a.sectionc_gallery_image,"                                    . "  a.sectionc_gallery_active_status,"                                    . "a.sectionc_gallery_order,"                                    . "DATE_FORMAT( a.sectionc_gallery_create_date, '%d-%m-%Y %H:%i:%s' ) as sectionc_gallery_create_date, a.sectionc_gallery_create_by, "                                    . " b.sectionc_id "                                    . "FROM tbl_sectionc_gallery as a "                                    . " inner join tbl_sectionc as b on a.sectionc_id = b.sectionc_id "                                    . " where b.sectionc_active_status=1 and a.sectionc_gallery_active_status=1 "                                    . " ORDER BY sectionc_gallery_id ASC";		$query		= $this->db->query($query)->result_array();				return $query;	}        }