<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Model_mission extends CI_Model {    function __construct()    {        parent::__construct();    }		function getListMission($cond = null){		$query		= "SELECT mission_id, mission_title,mission_order,mission_active_status,					  DATE_FORMAT( mission_create_date, '%d-%m-%Y %H:%i:%s' ) as mission_create_date, mission_create_by					  FROM tbl_mission ".$cond;		$query		= $this->db->query($query)->result_array();				return $query;	}		function getListMissionLanguageAlias($id, $languageid){		$query		= "SELECT a.mission_id, b.mission_lang_id, b.mission_lang_title,  b.language_id						FROM tbl_mission a						INNER JOIN tbl_mission_lang b ON a.mission_id = b.mission_id 						WHERE a.mission_active_status = 1 AND a.mission_id = ".$id." AND b.language_id = ".$languageid."						ORDER BY a.mission_id DESC";		$query		= $this->db->query($query)->result_array();				return $query;	}		function getListMissionLanguage($cond = null){		$query		= "SELECT a.language_id, a.language_title, a.language_default, a.language_active_status, 					    b.mission_id, b.mission_lang_id						FROM tbl_language a						LEFT JOIN tbl_mission_lang b ON a.language_id = b.language_id						".$cond;		$query		= $this->db->query($query)->result_array();				return $query;	}		function getMission($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE mission_id = ".$id;		}		$sql	= "SELECT mission_id, mission_title ,mission_active_status				  FROM tbl_mission $where ORDER BY mission_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 				return $rs;		}		function getMissionLang($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE mission_lang_id = ".$id;		}		$sql	= "SELECT mission_lang_id, mission_lang_title FROM tbl_mission_lang $where ORDER BY mission_lang_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 				return $rs;		}		function activeMission($id)	{		$sql	= "UPDATE tbl_mission SET mission_active_status = abs(mission_active_status-1),  				   mission_update_date = now(), 				   mission_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE mission_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}		function deleteMission($id = '')	{		$sql	= "DELETE FROM tbl_mission WHERE mission_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}		function deleteMissionLang($id = '')	{		$sql	= "DELETE FROM tbl_mission_lang WHERE mission_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}		function checkMission( $missiontitle){		$sql	= "SELECT mission_title FROM tbl_mission WHERE  mission_title = '".$missiontitle."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}		function checkMissionLang($missiontitlelang){		$sql	= "SELECT * FROM tbl_mission_lang WHERE mission_lang_title = '".$missiontitlelang."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}		function insertMission($missiontitle)	{		$sql	= "INSERT INTO tbl_mission SET 					mission_title='".$missiontitle."', 					mission_create_by = ".$_SESSION['admin_data']['user_id'].", mission_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();				return $last_id;	}		function insertMissionLang($missiontitlelang,$mission_id,$language_id)	{		$sql	= "INSERT INTO tbl_mission_lang SET 					mission_lang_title='".$missiontitlelang."',					mission_id=".$mission_id.",					language_id=".$language_id.",					mission_lang_create_by = ".$_SESSION['admin_data']['user_id'].", mission_lang_create_date = now()";			$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();				return $last_id;	}		function updateMission($id,$missiontitle)	{		$sql	= "UPDATE tbl_mission SET 				   mission_title='".$missiontitle."', 				   mission_update_by = ".$_SESSION['admin_data']['user_id'].", 				   mission_update_date=now() WHERE mission_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}		function updateMissionDefault($id,$missiontitle)	{		$sql	= "UPDATE tbl_mission SET 				   mission_title='".$missiontitle."', 				   mission_update_by = ".$_SESSION['admin_data']['user_id'].", mission_update_date=now() WHERE mission_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}		function updateMissionLang($missiontitle,$missionid,$languageid)	{		$sql	= "UPDATE tbl_mission_lang SET 				   mission_lang_title='".$missiontitle."',				   mission_lang_update_by = ".$_SESSION['admin_data']['user_id'].", mission_lang_update_date=now() 				   WHERE mission_id = ".$missionid." AND language_id = ".$languageid;				$query	= $this->db->query($sql);				return $query;	}		function updateMissionLangID($id,$missiontitlelang)	{		$sql	= "UPDATE tbl_mission_lang SET 				   mission_lang_title='".$missiontitlelang."',				   mission_lang_update_by = ".$_SESSION['admin_data']['user_id'].", mission_lang_update_date=now() 				   WHERE mission_lang_id = ".$id;				$query	= $this->db->query($sql);				return $query;	}                function updateOrder($id,$order)	{		$sql	= "UPDATE tbl_mission SET 				   mission_order= ".$order.",				   mission_update_by = ".$_SESSION['admin_data']['user_id'].", mission_update_date=now() WHERE mission_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}}