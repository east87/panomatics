<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Model_sunday extends CI_Model {    function __construct()    {        parent::__construct();    }        function getModule($module_name){            $data = array();            $sql="select module_id , module_group_id from tbl_module where module_path='".$module_name."' ";         		 $hasil = $this->db->query($sql);                        if($hasil->num_rows() > 0){				$data = $hasil->result();			}                        else{                            $data = '';                        }			$hasil->free_result();                        $this->db->close();			return $data;                 }          function getListSunday($cond = null){		  $query	    = "SELECT  a.sunday_id,  a.sunday_title,a.sunday_subtitle,a.sunday_timeplace, a.sunday_image, a.sunday_desc,"                                    . " a.sunday_footer,a.sunday_notif, a.sunday_active_status,"                                    . "DATE_FORMAT( a.sunday_create_date, '%d-%m-%Y %H:%i:%s' ) as sunday_create_date, a.sunday_create_by "                                                                      . "FROM tbl_sunday as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();		return $query;	}         		function getListSundayAlias(){		 $query		= "SELECT sunday_id, sunday_title, sunday_image, sunday_desc,						DATE_FORMAT( sunday_create_date, '%d %M %Y' ) as sunday_create_date,						c.web_alias, c.web_ori						FROM tbl_sunday a						INNER JOIN tbl_alias c ON a.sunday_id = c.key_id 						WHERE a.sunday_active_status = 1 AND c.alias_category = 'sunday' AND c.alias_active_status = 1						ORDER BY sunday_id DESC";		$query		= $this->db->query($query)->result_array();		return $query;	}		function getSunday($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE sunday_id = ".$id;		}		 $sql	= "SELECT  a.sunday_id,  a.sunday_title,a.sunday_subtitle,a.sunday_timeplace, a.sunday_image, a.sunday_desc,"                                    . " a.sunday_footer,a.sunday_notif, a.sunday_active_status,"                                    . "DATE_FORMAT( a.sunday_create_date, '%d-%m-%Y %H:%i:%s' ) as sunday_create_date, a.sunday_create_by "                                                                      . "FROM tbl_sunday as a "                                    . " $where "                                    . " ORDER BY sunday_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;		}	function checkSunday($sunday_title){		$sql	= "SELECT sunday_title FROM tbl_sunday WHERE sunday_title = '".$sunday_title."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}	function activeSunday($id)	{		$sql	= "UPDATE tbl_sunday SET sunday_active_status = abs(sunday_active_status-1),  				   sunday_update_date = now(), 				   sunday_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE sunday_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}	function deleteSunday($id = '')	{		$sql	= "DELETE FROM tbl_sunday WHERE sunday_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}        function insertSunday($sunday_title,$sunday_subtitle,$sunday_timeplace,$sunday_imageurl,$sunday_desc,$sunday_footer,$sunday_notif)	{		$sql	= "INSERT INTO tbl_sunday SET                             sunday_title='".$sunday_title."',                            sunday_subtitle='".$sunday_subtitle."',                            sunday_timeplace='".$sunday_timeplace."',                            sunday_image='".$sunday_imageurl."',                            sunday_desc='".$sunday_desc."',                            sunday_footer='".$sunday_footer."',                            sunday_notif='".$sunday_notif."',                            sunday_create_by = ".$_SESSION['admin_data']['user_id'].", sunday_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();		return $last_id;	}	function updateSunday($id,$sunday_title,$sunday_subtitle,$sunday_timeplace,$sunday_imageurl,$sunday_desc,$sunday_footer,$sunday_notif)	{		 $sql	= "UPDATE tbl_sunday SET                             sunday_title='".$sunday_title."',                            sunday_subtitle='".$sunday_subtitle."',                            sunday_timeplace='".$sunday_timeplace."',                            sunday_image='".$sunday_imageurl."',                            sunday_desc='".$sunday_desc."',                            sunday_footer='".$sunday_footer."',                            sunday_notif='".$sunday_notif."',                            sunday_update_by = ".$_SESSION['admin_data']['user_id'].",                             sunday_update_date=now() WHERE sunday_id = ".$id;			$query	= $this->db->query($sql);		return $query;	}         function updateOrderSunday($id,$order)	{		$sql	= "UPDATE tbl_sunday SET 				   sunday_order= ".$order.",				   sunday_update_by = ".$_SESSION['admin_data']['user_id'].", sunday_update_date=now() WHERE sunday_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}         function getPageView(){         $data = array();         $sql="select * from tbl_page_view order by page_type asc";                  $hasil = $this->db->query($sql);                        if($hasil->num_rows() > 0){				$data = $hasil->result();			}                        else{                            $data = '';                        }			$hasil->free_result();                        $this->db->close();			return $data;              }           function GenerateSunday($cond = null){		 $query		= "SELECT  a.sunday_id,  a.sunday_title,a.sunday_subtitle,a.sunday_timeplace, a.sunday_image, a.sunday_desc,"                                    . " a.sunday_footer,a.sunday_notif, a.sunday_active_status,"                                    . "DATE_FORMAT( a.sunday_create_date, '%d-%m-%Y %H:%i:%s' ) as sunday_create_date, a.sunday_create_by "                                                                      . "FROM tbl_sunday as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();				return $query;	}       function getListBanner($cond = null){		  $query	    = "SELECT  a.banner_sunday_id,  a.banner_sunday_title,"                                    . " a.banner_sunday_image, a.banner_sunday_order, a.banner_sunday_active_status,"                                    . "DATE_FORMAT( a.banner_sunday_create_date, '%d-%m-%Y %H:%i:%s' ) as banner_sunday_create_date, a.banner_sunday_create_by "                                                                      . "FROM tbl_banner_sunday as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();		return $query;	}  function getBanner($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE banner_sunday_id = ".$id;		}		 $sql	= "SELECT a.banner_sunday_id,a.banner_sunday_title,a.banner_sunday_image, a.banner_sunday_active_status, "                                    . "DATE_FORMAT( a.banner_sunday_create_date, '%d-%m-%Y %H:%i:%s' ) as banner_sunday_create_date, a.banner_sunday_create_by "                                                                      . "FROM tbl_banner_sunday as a "                                    . " $where "                                    . " ORDER BY banner_sunday_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;		}	function checkBanner($banner_sunday_title){		$sql	= "SELECT banner_sunday_title FROM tbl_banner_sunday WHERE banner_sunday_title = '".$banner_sunday_title."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}	function activeBanner($id)	{		$sql	= "UPDATE tbl_banner_sunday SET banner_sunday_active_status = abs(banner_sunday_active_status-1),  				   banner_sunday_update_date = now(), 				   banner_sunday_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE banner_sunday_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}	function deleteBanner($id = '')	{		$sql	= "DELETE FROM tbl_banner_sunday WHERE banner_sunday_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}        function insertBanner($banner_sunday_title,$banner_sunday_image)	{		$sql	= "INSERT INTO tbl_banner_sunday SET                             banner_sunday_title='".$banner_sunday_title."',                                banner_sunday_image='".$banner_sunday_image."',                             banner_sunday_create_by = ".$_SESSION['admin_data']['user_id'].", banner_sunday_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();		return $last_id;	}	function updateBanner($id,$banner_sunday_title,$banner_sunday_image,$banner_sunday_status)	{		 $sql	= "UPDATE tbl_banner_sunday SET                             banner_sunday_title='".$banner_sunday_title."',                             banner_sunday_image='".$banner_sunday_image."',                             banner_sunday_active_status='".$banner_sunday_status."',                            banner_sunday_update_by = ".$_SESSION['admin_data']['user_id'].",                            banner_sunday_update_date=now() WHERE banner_sunday_id = ".$id;			$query	= $this->db->query($sql);		return $query;	}         function updateOrderBanner($id,$order)	{		$sql	= "UPDATE tbl_banner_sunday SET 				   banner_sunday_order= ".$order.",				   banner_sunday_update_by = ".$_SESSION['admin_data']['user_id'].", banner_sunday_update_date=now() WHERE banner_sunday_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}   }