<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Model_sectiond extends CI_Model {    function __construct()    {        parent::__construct();    }        function getModule($module_name){            $data = array();            $sql="select module_id , module_group_id from tbl_module where module_path='".$module_name."' ";         		 $hasil = $this->db->query($sql);                        if($hasil->num_rows() > 0){				$data = $hasil->result();			}                        else{                            $data = '';                        }			$hasil->free_result();                        $this->db->close();			return $data;                 }          function getListSectiond($cond = null){		  $query	    = "SELECT  a.sectiond_id,  a.sectiond_title,a.sectiond_subtitle,a.sectiond_timeplace, a.sectiond_image, a.sectiond_desc,"                                    . " a.sectiond_footer,a.sectiond_notif, a.sectiond_active_status,"                                    . "DATE_FORMAT( a.sectiond_create_date, '%d-%m-%Y %H:%i:%s' ) as sectiond_create_date, a.sectiond_create_by "                                                                      . "FROM tbl_sectiond as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();		return $query;	}         		function getListSectiondAlias(){		 $query		= "SELECT sectiond_id, sectiond_title, sectiond_image, sectiond_desc,						DATE_FORMAT( sectiond_create_date, '%d %M %Y' ) as sectiond_create_date,						c.web_alias, c.web_ori						FROM tbl_sectiond a						INNER JOIN tbl_alias c ON a.sectiond_id = c.key_id 						WHERE a.sectiond_active_status = 1 AND c.alias_category = 'sectiond' AND c.alias_active_status = 1						ORDER BY sectiond_id DESC";		$query		= $this->db->query($query)->result_array();		return $query;	}		function getSectiond($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE sectiond_id = ".$id;		}		 $sql	= "SELECT  a.sectiond_id,  a.sectiond_title,a.sectiond_subtitle,a.sectiond_timeplace, a.sectiond_image, a.sectiond_desc,"                                    . " a.sectiond_footer,a.sectiond_notif, a.sectiond_active_status,"                                    . "DATE_FORMAT( a.sectiond_create_date, '%d-%m-%Y %H:%i:%s' ) as sectiond_create_date, a.sectiond_create_by "                                                                      . "FROM tbl_sectiond as a "                                    . " $where "                                    . " ORDER BY sectiond_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;		}	function checkSectiond($sectiond_title){		$sql	= "SELECT sectiond_title FROM tbl_sectiond WHERE sectiond_title = '".$sectiond_title."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}	function activeSectiond($id)	{		$sql	= "UPDATE tbl_sectiond SET sectiond_active_status = abs(sectiond_active_status-1),  				   sectiond_update_date = now(), 				   sectiond_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE sectiond_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}	function deleteSectiond($id = '')	{		$sql	= "DELETE FROM tbl_sectiond WHERE sectiond_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}        function insertSectiond($sectiond_title,$sectiond_subtitle,$sectiond_timeplace,$sectiond_imageurl,$sectiond_desc,$sectiond_footer,$sectiond_notif)	{		$sql	= "INSERT INTO tbl_sectiond SET                             sectiond_title='".$sectiond_title."',                            sectiond_subtitle='".$sectiond_subtitle."',                            sectiond_timeplace='".$sectiond_timeplace."',                            sectiond_image='".$sectiond_imageurl."',                            sectiond_desc='".$sectiond_desc."',                            sectiond_footer='".$sectiond_footer."',                            sectiond_notif='".$sectiond_notif."',                            sectiond_create_by = ".$_SESSION['admin_data']['user_id'].", sectiond_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();		return $last_id;	}	function updateSectiond($id,$sectiond_title,$sectiond_subtitle,$sectiond_timeplace,$sectiond_imageurl,$sectiond_desc,$sectiond_footer,$sectiond_notif)	{		 $sql	= "UPDATE tbl_sectiond SET                             sectiond_title='".$sectiond_title."',                            sectiond_subtitle='".$sectiond_subtitle."',                            sectiond_timeplace='".$sectiond_timeplace."',                            sectiond_image='".$sectiond_imageurl."',                            sectiond_desc='".$sectiond_desc."',                            sectiond_footer='".$sectiond_footer."',                            sectiond_notif='".$sectiond_notif."',                            sectiond_update_by = ".$_SESSION['admin_data']['user_id'].",                             sectiond_update_date=now() WHERE sectiond_id = ".$id;			$query	= $this->db->query($sql);		return $query;	}         function updateOrderSectiond($id,$order)	{		$sql	= "UPDATE tbl_sectiond SET 				   sectiond_order= ".$order.",				   sectiond_update_by = ".$_SESSION['admin_data']['user_id'].", sectiond_update_date=now() WHERE sectiond_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}         function getPageView(){         $data = array();         $sql="select * from tbl_page_view order by page_type asc";                  $hasil = $this->db->query($sql);                        if($hasil->num_rows() > 0){				$data = $hasil->result();			}                        else{                            $data = '';                        }			$hasil->free_result();                        $this->db->close();			return $data;              }           function GenerateSectiond($cond = null){		 $query		= "SELECT  a.sectiond_id,  a.sectiond_title,a.sectiond_subtitle,a.sectiond_timeplace, a.sectiond_image, a.sectiond_desc,"                                    . " a.sectiond_footer,a.sectiond_notif, a.sectiond_active_status,"                                    . "DATE_FORMAT( a.sectiond_create_date, '%d-%m-%Y %H:%i:%s' ) as sectiond_create_date, a.sectiond_create_by "                                                                      . "FROM tbl_sectiond as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();				return $query;	}       function getListBanner($cond = null){		  $query	    = "SELECT  a.banner_sectiond_id,  a.banner_sectiond_title,"                                    . " a.banner_sectiond_image, a.banner_sectiond_order, a.banner_sectiond_active_status,"                                    . "DATE_FORMAT( a.banner_sectiond_create_date, '%d-%m-%Y %H:%i:%s' ) as banner_sectiond_create_date, a.banner_sectiond_create_by "                                                                      . "FROM tbl_banner_sectiond as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();		return $query;	}  function getBanner($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE banner_sectiond_id = ".$id;		}		 $sql	= "SELECT a.banner_sectiond_id,a.banner_sectiond_title,a.banner_sectiond_image, a.banner_sectiond_active_status, "                                    . "DATE_FORMAT( a.banner_sectiond_create_date, '%d-%m-%Y %H:%i:%s' ) as banner_sectiond_create_date, a.banner_sectiond_create_by "                                                                      . "FROM tbl_banner_sectiond as a "                                    . " $where "                                    . " ORDER BY banner_sectiond_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;		}	function checkBanner($banner_sectiond_title){		$sql	= "SELECT banner_sectiond_title FROM tbl_banner_sectiond WHERE banner_sectiond_title = '".$banner_sectiond_title."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}	function activeBanner($id)	{		$sql	= "UPDATE tbl_banner_sectiond SET banner_sectiond_active_status = abs(banner_sectiond_active_status-1),  				   banner_sectiond_update_date = now(), 				   banner_sectiond_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE banner_sectiond_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}	function deleteBanner($id = '')	{		$sql	= "DELETE FROM tbl_banner_sectiond WHERE banner_sectiond_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}        function insertBanner($banner_sectiond_title,$banner_sectiond_image)	{		$sql	= "INSERT INTO tbl_banner_sectiond SET                             banner_sectiond_title='".$banner_sectiond_title."',                                banner_sectiond_image='".$banner_sectiond_image."',                             banner_sectiond_create_by = ".$_SESSION['admin_data']['user_id'].", banner_sectiond_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();		return $last_id;	}	function updateBanner($id,$banner_sectiond_title,$banner_sectiond_image,$banner_sectiond_status)	{		 $sql	= "UPDATE tbl_banner_sectiond SET                             banner_sectiond_title='".$banner_sectiond_title."',                             banner_sectiond_image='".$banner_sectiond_image."',                             banner_sectiond_active_status='".$banner_sectiond_status."',                            banner_sectiond_update_by = ".$_SESSION['admin_data']['user_id'].",                            banner_sectiond_update_date=now() WHERE banner_sectiond_id = ".$id;			$query	= $this->db->query($sql);		return $query;	}         function updateOrderBanner($id,$order)	{		$sql	= "UPDATE tbl_banner_sectiond SET 				   banner_sectiond_order= ".$order.",				   banner_sectiond_update_by = ".$_SESSION['admin_data']['user_id'].", banner_sectiond_update_date=now() WHERE banner_sectiond_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}   }