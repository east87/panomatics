<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Model_sectionc extends CI_Model {    function __construct()    {        parent::__construct();    }        function getModule($module_name){            $data = array();            $sql="select module_id , module_group_id from tbl_module where module_path='".$module_name."' ";         		 $hasil = $this->db->query($sql);                        if($hasil->num_rows() > 0){				$data = $hasil->result();			}                        else{                            $data = '';                        }			$hasil->free_result();                        $this->db->close();			return $data;                 }         function getListSectionc($cond = null){		  $query	    = "SELECT  a.sectionc_id,  a.sectionc_title, a.sectionc_image, a.sectionc_desc,"                                    . " a.sectionc_image, a.sectionc_active_status,"                                    . "DATE_FORMAT( a.sectionc_create_date, '%d-%m-%Y %H:%i:%s' ) as sectionc_create_date, a.sectionc_create_by "                                                                      . "FROM tbl_sectionc as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();		return $query;	}         		function getListSectioncAlias(){		 $query		= "SELECT sectionc_id, sectionc_title, sectionc_image, sectionc_desc,						DATE_FORMAT( sectionc_create_date, '%d %M %Y' ) as sectionc_create_date,						c.web_alias, c.web_ori						FROM tbl_sectionc a						INNER JOIN tbl_alias c ON a.sectionc_id = c.key_id 						WHERE a.sectionc_active_status = 1 AND c.alias_category = 'sectionc' AND c.alias_active_status = 1						ORDER BY sectionc_id DESC";		$query		= $this->db->query($query)->result_array();		return $query;	}		function getSectionc($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE sectionc_id = ".$id;		}		 $sql	= "SELECT a.sectionc_id,a.sectionc_title,a.sectionc_image, a.sectionc_active_status,a.sectionc_desc,a.sectionc_urla,a.sectionc_urlb,a.sectionc_urlc, "                                    . "DATE_FORMAT( a.sectionc_create_date, '%d-%m-%Y %H:%i:%s' ) as sectionc_create_date, a.sectionc_create_by "                                                                      . "FROM tbl_sectionc as a "                                    . " $where "                                    . " ORDER BY sectionc_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;		}	function checkSectionc($sectionc_title){		$sql	= "SELECT sectionc_title FROM tbl_sectionc WHERE sectionc_title = '".$sectionc_title."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}	function activeSectionc($id)	{		$sql	= "UPDATE tbl_sectionc SET sectionc_active_status = abs(sectionc_active_status-1),  				   sectionc_update_date = now(), 				   sectionc_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE sectionc_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}	function deleteSectionc($id = '')	{		$sql	= "DELETE FROM tbl_sectionc WHERE sectionc_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}        function insertSectionc($sectionc_title,$sectionc_imageurl,$sectionc_desc,$sectionc_urla,$sectionc_urlb,$sectionc_urlc)	{		$sql	= "INSERT INTO tbl_sectionc SET                             sectionc_title='".$sectionc_title."',                            sectionc_image='".$sectionc_imageurl."',                            sectionc_desc='".$sectionc_desc."',                            sectionc_urla='".$sectionc_urla."',                            sectionc_urlb='".$sectionc_urlb."',                            sectionc_urlc='".$sectionc_urlc."',                            sectionc_create_by = ".$_SESSION['admin_data']['user_id'].", sectionc_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();		return $last_id;	}	function updateSectionc($id,$sectionc_title,$sectionc_imageurl,$sectionc_desc,$sectionc_urla,$sectionc_urlb,$sectionc_urlc)	{		 $sql	= "UPDATE tbl_sectionc SET                             sectionc_title='".$sectionc_title."',                             sectionc_image='".$sectionc_imageurl."',                            sectionc_desc='".$sectionc_desc."',                            sectionc_urla='".$sectionc_urla."',                            sectionc_urlb='".$sectionc_urlb."',                            sectionc_urlc='".$sectionc_urlc."',                            sectionc_update_by = ".$_SESSION['admin_data']['user_id'].",                             sectionc_update_date=now() WHERE sectionc_id = ".$id;			$query	= $this->db->query($sql);		return $query;	}         function updateOrderSectionc($id,$order)	{		$sql	= "UPDATE tbl_sectionc SET 				   sectionc_order= ".$order.",				   sectionc_update_by = ".$_SESSION['admin_data']['user_id'].", sectionc_update_date=now() WHERE sectionc_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}         function getPageView(){         $data = array();         $sql="select * from tbl_page_view order by page_type asc";                  $hasil = $this->db->query($sql);                        if($hasil->num_rows() > 0){				$data = $hasil->result();			}                        else{                            $data = '';                        }			$hasil->free_result();                        $this->db->close();			return $data;              }        function GenerateSectionc($cond = null){            $query		 = "SELECT  a.sectionc_id,  a.sectionc_title, a.sectionc_image, a.sectionc_desc, a.sectionc_urla,a.sectionc_urlb,a.sectionc_urlc,"                                    . "a.sectionc_active_status,"                                    . "DATE_FORMAT( a.sectionc_create_date, '%d-%m-%Y %H:%i:%s' ) as sectionc_create_date, a.sectionc_create_by "                                                                      . "FROM tbl_sectionc as a "                                    . " ".$cond;                    $query = $this->db->query($query)->result_array();                    $data  = array();                    foreach ($query as $row) {                    $data[] = array(                    'sectionc_id' => $row['sectionc_id'],                    'sectionc_title' => $row['sectionc_title'],                    'sectionc_image' => $row['sectionc_image'],                    'sectionc_desc' => $row['sectionc_desc'],                    'sectionc_urla' => $row['sectionc_urla'],                    'sectionc_urlb' => $row['sectionc_urlb'],                    'sectionc_urlc' => $row['sectionc_urlc'],                    'gallery' => $this->getGallery($row['sectionc_id'])                );            }            //$query->free_result();            $this->db->close();            return $data;	} function getGallery($sectionc_id){		 $query	 = "SELECT a.sectionc_gallery_id, a.sectionc_gallery_title,a.sectionc_gallery_image, "                                    . " a.sectionc_gallery_active_status,"                                    . "a.sectionc_gallery_order, "                                    . "DATE_FORMAT( a.sectionc_gallery_create_date, '%d-%m-%Y %H:%i:%s' ) as sectionc_gallery_create_date, a.sectionc_gallery_create_by "                                    . "FROM tbl_sectionc_gallery as a "                                    . " inner join tbl_sectionc as b on a.sectionc_id = b.sectionc_id "                                    . " where a.sectionc_gallery_active_status =1 and a.sectionc_id =".$sectionc_id." order by a.sectionc_gallery_order ASC";                                    		$query		= $this->db->query($query)->result_array();		return $query;	}      function getListBanner($cond = null){		  $query	    = "SELECT  a.banner_sectionc_id,  a.banner_sectionc_title,"                                    . " a.banner_sectionc_image, a.banner_sectionc_order, a.banner_sectionc_active_status,"                                    . "DATE_FORMAT( a.banner_sectionc_create_date, '%d-%m-%Y %H:%i:%s' ) as banner_sectionc_create_date, a.banner_sectionc_create_by "                                                                      . "FROM tbl_banner_sectionc as a "                                    . " ".$cond;		$query		= $this->db->query($query)->result_array();		return $query;	}  function getBanner($id = '')	{		$where = '';		if($id != ''){			$where = "WHERE banner_sectionc_id = ".$id;		}		 $sql	= "SELECT a.banner_sectionc_id,a.banner_sectionc_title,a.banner_sectionc_image, a.banner_sectionc_active_status, "                                    . "DATE_FORMAT( a.banner_sectionc_create_date, '%d-%m-%Y %H:%i:%s' ) as banner_sectionc_create_date, a.banner_sectionc_create_by "                                                                      . "FROM tbl_banner_sectionc as a "                                    . " $where "                                    . " ORDER BY banner_sectionc_id ASC";			$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;		}	function checkBanner($banner_sectionc_title){		$sql	= "SELECT banner_sectionc_title FROM tbl_banner_sectionc WHERE banner_sectionc_title = '".$banner_sectionc_title."'";		$query	= $this->db->query($sql);		$rs		= $query->result_array(); 		return $rs;	}	function activeBanner($id)	{		$sql	= "UPDATE tbl_banner_sectionc SET banner_sectionc_active_status = abs(banner_sectionc_active_status-1),  				   banner_sectionc_update_date = now(), 				   banner_sectionc_update_by = ".$_SESSION['admin_data']['user_id']."				   WHERE banner_sectionc_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}	function deleteBanner($id = '')	{		$sql	= "DELETE FROM tbl_banner_sectionc WHERE banner_sectionc_id = ".$id;			$query	= $this->db->query($sql);				$str = $this->db->last_query();				return $str;	}        function insertBanner($banner_sectionc_title,$banner_sectionc_image)	{		$sql	= "INSERT INTO tbl_banner_sectionc SET                             banner_sectionc_title='".$banner_sectionc_title."',                                banner_sectionc_image='".$banner_sectionc_image."',                             banner_sectionc_create_by = ".$_SESSION['admin_data']['user_id'].", banner_sectionc_create_date = now()";					$query  = $this->db->query($sql);		$last_id  = $this->db->insert_id();		return $last_id;	}	function updateBanner($id,$banner_sectionc_title,$banner_sectionc_image,$banner_sectionc_status)	{		 $sql	= "UPDATE tbl_banner_sectionc SET                             banner_sectionc_title='".$banner_sectionc_title."',                             banner_sectionc_image='".$banner_sectionc_image."',                             banner_sectionc_active_status='".$banner_sectionc_status."',                            banner_sectionc_update_by = ".$_SESSION['admin_data']['user_id'].",                            banner_sectionc_update_date=now() WHERE banner_sectionc_id = ".$id;			$query	= $this->db->query($sql);		return $query;	}         function updateOrderBanner($id,$order)	{		$sql	= "UPDATE tbl_banner_sectionc SET 				   banner_sectionc_order= ".$order.",				   banner_sectionc_update_by = ".$_SESSION['admin_data']['user_id'].", banner_sectionc_update_date=now() WHERE banner_sectionc_id = ".$id;			$query	= $this->db->query($sql);				return $query;	}   }